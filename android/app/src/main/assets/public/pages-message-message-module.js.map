{"version":3,"sources":["./src/app/pages/message/message.page.html","./src/app/pages/message/message-routing.module.ts","./src/app/pages/message/message.module.ts","./src/app/pages/message/message.page.scss","./src/app/pages/message/message.page.ts","./src/app/services/message.service.ts"],"names":[],"mappings":"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","file":"pages-message-message-module.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button></ion-back-button>\\r\\n    </ion-buttons> \\r\\n    <ion-title>Message the Agent</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"ion-padding\\\">\\r\\n\\r\\n  <ion-item >\\r\\n    <ion-label position=\\\"stacked\\\">Name</ion-label>\\r\\n    <ion-input readonly type=\\\"text\\\" >{{userList?.name}}</ion-input>\\r\\n  </ion-item>\\r\\n\\r\\n  <ion-item>\\r\\n    <ion-label position=\\\"stacked\\\">Email</ion-label>\\r\\n    <ion-input readonly type=\\\"email\\\" >{{userList?.email}}</ion-input>\\r\\n  </ion-item>\\r\\n\\r\\n  <ion-item>\\r\\n    <ion-label position=\\\"stacked\\\">Contact Number</ion-label>\\r\\n    <ion-input required maxlength=\\\"10\\\" type=\\\"tel\\\" [(ngModel)]=\\\"store.number\\\"></ion-input>\\r\\n  </ion-item>\\r\\n\\r\\n  <ion-item>\\r\\n    <ion-label position=\\\"stacked\\\">Message</ion-label>\\r\\n    <ion-input required type=\\\"text\\\" [(ngModel)]=\\\"store.message\\\"></ion-input>\\r\\n  </ion-item>\\r\\n\\r\\n  <ion-button expand=\\\"block\\\" color=\\\"primary\\\" (click)=\\\"message(store)\\\">Send\\r\\n    Message</ion-button>\\r\\n\\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { MessagePage } from './message.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: MessagePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class MessagePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { MessagePageRoutingModule } from './message-routing.module';\r\n\r\nimport { MessagePage } from './message.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    MessagePageRoutingModule,\r\n    ReactiveFormsModule\r\n  ],\r\n  declarations: [MessagePage]\r\n})\r\nexport class MessagePageModule {}\r\n","export default \".error {\\n  color: red;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbWVzc2FnZS9DOlxcVXNlcnNcXENvZGVUcmliZVxcRGVza3RvcFxcQ29kZVRyaWJlXFxpb25pY1xcS2V5d29yeEFwcC9zcmNcXGFwcFxccGFnZXNcXG1lc3NhZ2VcXG1lc3NhZ2UucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9tZXNzYWdlL21lc3NhZ2UucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksVUFBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvbWVzc2FnZS9tZXNzYWdlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5lcnJvcntcclxuICAgIGNvbG9yOiByZWQ7XHJcbn0iLCIuZXJyb3Ige1xuICBjb2xvcjogcmVkO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { AngularFirestore, AngularFirestoreDocument } from '@angular/fire/firestore';\r\nimport { MessageService } from 'src/app/services/message.service';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { EmailComposer } from '@ionic-native/email-composer/ngx';\r\nimport { ProfileService } from 'src/app/services/profile.service';\r\nimport { PropertyService } from 'src/app/services/property.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { AlertController } from '@ionic/angular';\r\n\r\n\r\n@Component({\r\n  selector: 'app-message',\r\n  templateUrl: './message.page.html',\r\n  styleUrls: ['./message.page.scss'],\r\n})\r\nexport class MessagePage implements OnInit {\r\n  messageForm: FormGroup;\r\n  userList;\r\n  propertyList;\r\n  currentUser;\r\n  users: any;\r\n  propertyid;\r\n  agentUid;\r\n\r\n  \r\n\r\n  private User: AngularFirestoreDocument\r\n  currentImage = null;\r\n\r\n  store = {\r\n    name: '',\r\n    email: '',\r\n    number: '',\r\n    message: '',\r\n    uid: '',\r\n    isRead: false,\r\n\r\n  }\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private afs: AngularFirestore,\r\n    private messServ: MessageService,\r\n    private profileServ: ProfileService,\r\n    private propertyServ: PropertyService,\r\n    private afAuth: AngularFireAuth,\r\n    private emailComposer: EmailComposer,\r\n    private route: ActivatedRoute,\r\n    private alertController: AlertController\r\n  ) {\r\n\r\n    this.route.queryParams.subscribe(params => {\r\n      if (params && params.propertyList) {\r\n        this.propertyList = JSON.parse(params.propertyList);\r\n        this.propertyid = this.propertyList.propertyid\r\n        this.agentUid = this.propertyList.uid;\r\n        console.log(this.propertyList)\r\n      }\r\n\r\n    })\r\n\r\n    this.messageForm = fb.group({\r\n      name: ['', Validators.compose([Validators.minLength(4), Validators.maxLength(30), Validators.required])],\r\n      email: ['', Validators.compose([Validators.pattern('^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$'), Validators.required])],\r\n      number: ['', Validators.compose([Validators.minLength(10), Validators.maxLength(10), Validators.required])],\r\n      message: ['', Validators.required]\r\n    });\r\n\r\n    const uid = this.profileServ.getUID();\r\n\r\n    this.messServ.getUser(uid).subscribe(data => {\r\n      this.userList = data;\r\n      console.log(data)\r\n    })\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  async message(store) {\r\n    this.profileServ.getUID();\r\n    //  return this.afs.collection(\"properties\").doc(propertyid).set(property)\r\n\r\n    this.afs.collection('message').add({\r\n      name: this.userList.name,\r\n      email: this.userList.email,\r\n      number: this.store.number,\r\n      message: this.store.message,\r\n      isRead: this.store.isRead,\r\n      AgentUid: this.propertyList.uid,\r\n      propertyid: this.propertyList.propertyid,\r\n      date: Date.now(),\r\n    });\r\n    console.log(this.store)\r\n   \r\n    let email = {\r\n      to: 'codersgroup2020@gmail.com',\r\n      attachments: [\r\n        this.currentImage\r\n      ],\r\n      subject: 'property',\r\n      body: this.store.message,\r\n      isHtml: true\r\n    };\r\n    this.emailComposer.open(email);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AngularFirestore, AngularFirestoreDocument } from '@angular/fire/firestore';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MessageService {\r\n\r\n  user: Observable<User>\r\n  private userDoc : AngularFirestoreDocument<User>\r\n  \r\n\r\n  constructor(\r\n    private afs: AngularFirestore\r\n  ) { \r\n    \r\n  }\r\n\r\n  getUser(key){\r\n    this.userDoc = this.afs.doc<User>('users/' + key);\r\n    return this.userDoc.valueChanges();\r\n  }\r\n  \r\n}\r\n"],"sourceRoot":"webpack:///"}